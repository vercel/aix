---
title: useScrollOnComposerUpdate
description: Auto-scroll when the composer grows
---

`useScrollOnComposerUpdate` automatically scrolls the message list to the end
when the composer height increases. This keeps the conversation visible as the
user types multi-line messages.

## Usage

```tsx
import { useScrollOnComposerUpdate } from 'aix'

function MessageList({ messages }) {
  useScrollOnComposerUpdate()

  // ... rest of your list
}
```

## How It Works

The hook watches the `composerHeight` shared value. When it increases, it checks
if the user is already scrolled near the bottom:

```tsx
const distanceFromEnd = contentLength - scroll - scrollLength

// If already at the bottom, scroll to keep it there
if (distanceFromEnd < 0) {
  scrollToEnd({ animated: false })
}
```

The scroll happens without animation to feel instant and natural.

## When It Scrolls

The hook only scrolls when:

1. The composer height increases (user is typing)
2. The user is already at or near the bottom of the list

If the user has scrolled up to read older messages, the list won't jump.

## Example

```tsx
import {
  useScrollOnComposerUpdate,
  useMessageListProps,
  useComposerHeightContext,
} from 'aix'
import { AnimatedLegendList } from '@legendapp/list/reanimated'

function MessageList({ messages }) {
  useScrollOnComposerUpdate()
  const props = useMessageListProps()

  return (
    <AnimatedLegendList
      data={messages}
      renderItem={({ item }) => <Message message={item} />}
      {...props}
    />
  )
}

function Composer() {
  const { composerHeight } = useComposerHeightContext()

  return (
    <Animated.View
      onLayout={(e) => composerHeight.set(e.nativeEvent.layout.height)}
    >
      <TextInput multiline placeholder='Message' />
    </Animated.View>
  )
}
```

## Requirements

This hook requires:

- `MessageListContextProvider` – For list ref and scroll functions
- `ComposerHeightContextProvider` – For composer height tracking

## Related Hooks

- [useComposerHeightContext](/docs/providers#composerheightcontextprovider) –
  Track composer height
- [useMessageListProps](/docs/use-message-list-props) – Get list props
- [useKeyboardAwareMessageList](/docs/use-keyboard-aware-message-list) –
  Keyboard handling
